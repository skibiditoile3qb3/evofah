<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Player Profile</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: #0a0a0a;
            color: #fff;
            min-height: 100vh;
            padding: 40px 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .back-btn {
            padding: 12px 24px;
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 6px;
            color: #fff;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
            margin-bottom: 30px;
            display: inline-block;
            text-decoration: none;
        }
        .back-btn:hover {
            background: #252525;
            border-color: #555;
        }
        h1 {
            text-align: center;
            margin-bottom: 40px;
            font-size: 36px;
            font-weight: 300;
            letter-spacing: 2px;
        }
        .profile-grid {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
            margin-bottom: 40px;
        }
        .left-panel {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 12px;
            padding: 30px;
            text-align: center;
        }
        #bigPlayerSphere {
            margin: 0 auto 20px;
            display: block;
            cursor: grab;
        }
        #bigPlayerSphere:active {
            cursor: grabbing;
        }
        .username {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .status {
            font-size: 18px;
            margin-bottom: 20px;
        }
        .status.admin { color: #ff4444; }
        .status.owner { color: #a855f7; }
        .status.rare { color: #3b82f6; }
        .status.legendary { color: #ffd700; }
        .status.mystical { color: #008c99; text-shadow: 0 0 10px rgba(168, 85, 247, 0.5); }
        .coins-display {
            font-size: 20px;
            color: #d69e2e;
            margin-bottom: 20px;
        }
        .right-panel {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 12px;
            padding: 30px;
        }
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 1px solid #333;
            padding-bottom: 10px;
        }
        .tab {
            padding: 10px 20px;
            background: transparent;
            border: none;
            color: #888;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.2s;
            border-radius: 6px 6px 0 0;
        }
        .tab:hover {
            color: #fff;
            background: #252525;
        }
        .tab.active {
            color: #fff;
            background: #252525;
            border-bottom: 2px solid #d69e2e;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 15px 0;
            border-bottom: 1px solid #333;
        }
        .stat-label {
            color: #888;
        }
        .stat-value {
            color: #fff;
            font-weight: bold;
        }
        .cosmetics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }
        .cosmetic-item {
            background: #252525;
            border: 2px solid #333;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        .cosmetic-item:hover {
            border-color: #555;
            transform: translateY(-2px);
        }
        .cosmetic-item.equipped {
            border-color: #d69e2e;
            background: #2a2a1a;
        }
        .cosmetic-item.locked {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .cosmetic-preview {
            width: 80px;
            height: 80px;
            margin: 0 auto 10px;
        }
        .cosmetic-name {
            font-size: 14px;
            margin-bottom: 5px;
        }
        .cosmetic-status {
            font-size: 12px;
            color: #d69e2e;
        }
        .share-btn {
            padding: 12px 24px;
            background: #38a169;
            border: 1px solid #2f855a;
            border-radius: 6px;
            color: #fff;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
            margin-top: 20px;
        }
        .share-btn:hover {
            background: #2f855a;
        }
        @media (max-width: 768px) {
            .profile-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
    <script src="PlayerSphere.js"></script>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-btn">‚Üê BACK TO GAMES</a>
        <h1>üë§ PLAYER PROFILE</h1>

        <div class="profile-grid">
            <!-- Left Panel -->
            <div class="left-panel">
                <canvas id="bigPlayerSphere" width="200" height="200"></canvas>
                <div class="username" id="profileUsername">guest000000</div>
                <div class="status" id="profileStatus">player</div>
                <div class="coins-display">üí∞ <span id="profileCoins">0</span> coins</div>
                <button class="share-btn" id="shareBtn">üì∏ Share Profile</button>
            </div>

            <!-- Right Panel -->
            <div class="right-panel">
                <div class="tabs">
                    <button class="tab active" data-tab="stats">üìä Stats</button>
                    <button class="tab" data-tab="cosmetics">üé® Cosmetics</button>
                </div>

                <!-- Stats Tab -->
                <div class="tab-content active" id="stats">
                    <div class="stat-row">
                        <span class="stat-label">Total Playtime</span>
                        <span class="stat-value" id="statPlaytime">0 minutes</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Status</span>
                        <span class="stat-value" id="statStatus">player</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Total Coins</span>
                        <span class="stat-value" id="statCoins">0</span>
                    </div>
                </div>

                <!-- Cosmetics Tab -->
                <div class="tab-content" id="cosmetics">
                    <h3 style="margin-bottom: 20px; color: #d69e2e;">üåà Colors</h3>
                    <div class="cosmetics-grid" id="colorsGrid"></div>

                    <h3 style="margin: 30px 0 20px; color: #d69e2e;">üé© Hats</h3>
                    <div class="cosmetics-grid" id="hatsGrid"></div>

                    <h3 style="margin: 30px 0 20px; color: #d69e2e;">üòä Faces</h3>
                    <div class="cosmetics-grid" id="facesGrid"></div>

                    <h3 style="margin: 30px 0 20px; color: #d69e2e;">‚ú® Effects</h3>
                    <div class="cosmetics-grid" id="effectsGrid"></div>

                    <h3 style="margin: 30px 0 20px; color: #d69e2e;">‚öîÔ∏è Swords</h3>
                    <div class="cosmetics-grid" id="swordsGrid"></div>
                    
                </div>
            </div>
        </div>
    </div>

    <script>
        const _0x4a2b = (s) => btoa(s).split('').reverse().join('');
        const _0x2b4a = (s) => atob(s.split('').reverse().join(''));
        const _0x9c3d = 'X2NvaW5EYXRh';
        const _0x3e8a = 'X3RvdGFsQWN0aXZlVGltZQ==';

        function getUserProfile() {
            try {
                const stored = localStorage.getItem('userProfile');
                if (stored) {
                    const profile = JSON.parse(stored);
                    if (!profile.equippedCosmetics) {
                        profile.equippedCosmetics = {
                            color: 'default',
                            hat: 'none',
                            face: 'none',
                            effect: 'none',
                            sword: 'none'
                        };
                    }
                    if (!profile.ownedCosmetics) {
                        profile.ownedCosmetics = {
                            colors: ['default'],
                            hats: ['none'],
                            faces: ['none'],
                            effects: ['none'],
                            swords: ['none']
                        };
                    }
                    return profile;
                }
            } catch(e) {}
            return { 
                username: 'guest000000',
                status: 'player',
                equippedCosmetics: { color: 'default', hat: 'none', face: 'none', effect: 'none', sword: 'none' },
                ownedCosmetics: { colors: ['default'], hats: ['none'], faces: ['none'], effects: ['none'], swords: ['none'] }
            };
        }

        function saveUserProfile(profile) {
            try {
                localStorage.setItem('userProfile', JSON.stringify(profile));
            } catch(e) {}
        }

        function getCoins() {
            try {
                const stored = localStorage.getItem(_0x2b4a(_0x9c3d));
                if (stored) {
                    return parseInt(_0x2b4a(stored));
                }
            } catch(e) {}
            return 10;
        }

        function getTotalActiveTime() {
            try {
                const stored = localStorage.getItem(_0x2b4a(_0x3e8a));
                return stored ? parseInt(_0x2b4a(stored)) : 0;
            } catch(e) {}
            return 0;
        }

       let userProfile = getUserProfile();
        let coins = getCoins();
        let rotation = { x: 0, y: 0 };
        let isDragging = false;
        let lastMouse = { x: 0, y: 0 };
        let bigSphereRenderer = null;

        // Draw big player sphere
        function drawBigPlayerSphere() {
            if (!bigSphereRenderer) {
                bigSphereRenderer = new PlayerSphere('bigPlayerSphere', 200);
            }
            
            bigSphereRenderer.draw(userProfile.equippedCosmetics);
        }

// Animate black hole effect
function updateBigSphereAnimation() {
            const animatedEffects = ['blackhole', 'wings', 'glitch'];
            if (animatedEffects.includes(userProfile.equippedCosmetics.effect)) {
                if (bigSphereRenderer && !bigSphereRenderer.shouldAnimate) {
                    bigSphereRenderer.startAnimation(userProfile.equippedCosmetics);
                }
            } else {
                if (bigSphereRenderer && bigSphereRenderer.shouldAnimate) {
                    bigSphereRenderer.stopAnimation();
                }
            }
        }
        
        // Initialize animation
        updateBigSphereAnimation();
        // Drag to rotate (placeholder for future 3D)
        const canvas = document.getElementById('bigPlayerSphere');
        canvas.addEventListener('mousedown', (e) => {
            isDragging = true;
            lastMouse = { x: e.clientX, y: e.clientY };
        });

        document.addEventListener('mousemove', (e) => {
            if (isDragging) {
                const dx = e.clientX - lastMouse.x;
                const dy = e.clientY - lastMouse.y;
                rotation.y += dx * 0.01;
                rotation.x += dy * 0.01;
                lastMouse = { x: e.clientX, y: e.clientY };
            }
        });

        document.addEventListener('mouseup', () => {
            isDragging = false;
        });

        // Load profile data
        function loadProfileData() {
            document.getElementById('profileUsername').textContent = userProfile.username;
            document.getElementById('profileStatus').textContent = userProfile.status;
            document.getElementById('profileStatus').className = 'status ' + userProfile.status;
            document.getElementById('profileCoins').textContent = coins.toLocaleString();

            document.getElementById('statStatus').textContent = userProfile.status;
            document.getElementById('statCoins').textContent = coins.toLocaleString();
            
            const totalTime = getTotalActiveTime();
            const minutes = Math.floor(totalTime / 60);
            document.getElementById('statPlaytime').textContent = `${minutes} minutes`;

            drawBigPlayerSphere();
            updateBigSphereAnimation();
        }

        // Cosmetics data
        const cosmetics = {
            colors: [
                { id: 'default', name: 'Default Gray', preview: '#555' },
                { id: 'sunset', name: 'Sunset', preview: 'linear-gradient(#ff6b6b, #ff9a3c)' },
                { id: 'ocean', name: 'Ocean', preview: 'linear-gradient(#4cc9f0, #0077b6)' },
                { id: 'galaxy', name: 'Galaxy', preview: 'linear-gradient(#c77dff, #3c096c)' }
            ],
            hats: [
                { id: 'none', name: 'None', icon: '‚ùå' },
                { id: 'crown', name: 'Crown', icon: 'üëë' },
                { id: 'tophat', name: 'Top Hat', icon: 'üé©' },
                { id: 'wizard', name: 'Wizard Hat', icon: 'üßô' },
                { id: 'santa', name: 'Santa Hat', icon: 'üéÖ' },
                { id: 'party', name: 'Party Hat', icon: 'üéâ' }
            ],
            faces: [
                { id: 'none', name: 'None', icon: 'üòê' },
                { id: 'happy', name: 'Happy', icon: 'üòä' },
                { id: 'evil', name: 'Evil', icon: 'üòà' },
                { id: 'cool', name: 'Cool (Sunglasses)', icon: 'üòé' }
            ],
            effects: [
                { id: 'none', name: 'None', icon: '‚ùå' },
                { id: 'blackhole', name: 'Black Holes', icon: 'üåë' },
                { id: 'wings', name: 'Black Wings', icon: 'üñ§' }
            ],
            swords: [
                { id: 'none', name: 'None', icon: '‚ùå' },
                { id: 'stick', name: 'Stick Sword', icon: 'ü™µ' },
                { id: 'stone', name: 'Stone Sword', icon: '‚öîÔ∏è' },
                { id: 'dragon', name: 'Dragon Sword', icon: 'üêâ' }
            ]
        };

        // Render cosmetics
        function renderCosmetics() {
            // Colors
            const colorsGrid = document.getElementById('colorsGrid');
            colorsGrid.innerHTML = '';
            cosmetics.colors.forEach(item => {
                const owned = userProfile.ownedCosmetics.colors.includes(item.id);
                const equipped = userProfile.equippedCosmetics.color === item.id;
                
                const div = document.createElement('div');
                div.className = 'cosmetic-item' + (equipped ? ' equipped' : '') + (!owned ? ' locked' : '');
                div.innerHTML = `
                    <div class="cosmetic-preview" style="background: ${item.preview}; border-radius: 50%;"></div>
                    <div class="cosmetic-name">${item.name}</div>
                    <div class="cosmetic-status">${equipped ? 'EQUIPPED' : owned ? 'Click to equip' : 'LOCKED'}</div>
                `;
                if (owned) {
                    div.onclick = () => equipCosmetic('color', item.id);
                }
                colorsGrid.appendChild(div);
            });

            // Hats
            const hatsGrid = document.getElementById('hatsGrid');
            hatsGrid.innerHTML = '';
            cosmetics.hats.forEach(item => {
                const owned = userProfile.ownedCosmetics.hats.includes(item.id);
                const equipped = userProfile.equippedCosmetics.hat === item.id;
                
                const div = document.createElement('div');
                div.className = 'cosmetic-item' + (equipped ? ' equipped' : '') + (!owned ? ' locked' : '');
                div.innerHTML = `
                    <div class="cosmetic-preview" style="font-size: 48px;">${item.icon}</div>
                    <div class="cosmetic-name">${item.name}</div>
                    <div class="cosmetic-status">${equipped ? 'EQUIPPED' : owned ? 'Click to equip' : 'LOCKED'}</div>
                `;
                if (owned) {
                    div.onclick = () => equipCosmetic('hat', item.id);
                }
                hatsGrid.appendChild(div);
            });

            // Faces
            const facesGrid = document.getElementById('facesGrid');
            facesGrid.innerHTML = '';
            cosmetics.faces.forEach(item => {
                const owned = userProfile.ownedCosmetics.faces.includes(item.id);
                const equipped = userProfile.equippedCosmetics.face === item.id;
                
                const div = document.createElement('div');
                div.className = 'cosmetic-item' + (equipped ? ' equipped' : '') + (!owned ? ' locked' : '');
                div.innerHTML = `
                    <div class="cosmetic-preview" style="font-size: 48px;">${item.icon}</div>
                    <div class="cosmetic-name">${item.name}</div>
                    <div class="cosmetic-status">${equipped ? 'EQUIPPED' : owned ? 'Click to equip' : 'LOCKED'}</div>
                `;
                if (owned) {
                    div.onclick = () => equipCosmetic('face', item.id);
                }
                facesGrid.appendChild(div);
            });

            // Effects
            const effectsGrid = document.getElementById('effectsGrid');
            effectsGrid.innerHTML = '';
            cosmetics.effects.forEach(item => {
                const owned = userProfile.ownedCosmetics.effects.includes(item.id);
                const equipped = userProfile.equippedCosmetics.effect === item.id;
                
                const div = document.createElement('div');
                div.className = 'cosmetic-item' + (equipped ? ' equipped' : '') + (!owned ? ' locked' : '');
                div.innerHTML = `
                    <div class="cosmetic-preview" style="font-size: 48px;">${item.icon}</div>
                    <div class="cosmetic-name">${item.name}</div>
                    <div class="cosmetic-status">${equipped ? 'EQUIPPED' : owned ? 'Click to equip' : 'LOCKED'}</div>
                `;
                if (owned) {
                    div.onclick = () => equipCosmetic('effect', item.id);
                }
                effectsGrid.appendChild(div);
            });

            // Swords
const swordsGrid = document.getElementById('swordsGrid');
swordsGrid.innerHTML = '';
cosmetics.swords.forEach(item => {
    const owned = userProfile.ownedCosmetics.swords.includes(item.id);
    const equipped = userProfile.equippedCosmetics.sword === item.id;
    
    const div = document.createElement('div');
    div.className = 'cosmetic-item' + (equipped ? ' equipped' : '') + (!owned ? ' locked' : '');
    div.innerHTML = `
        <div class="cosmetic-preview" style="font-size: 48px;">${item.icon}</div>
        <div class="cosmetic-name">${item.name}</div>
        <div class="cosmetic-status">${equipped ? 'EQUIPPED' : owned ? 'Click to equip' : 'LOCKED'}</div>
    `;
    if (owned) {
        div.onclick = () => equipCosmetic('sword', item.id);
    }
    swordsGrid.appendChild(div);
});
        }

        // Equip cosmetic
function equipCosmetic(type, id) {
            if (type === 'color') {
                userProfile.equippedCosmetics.color = id;
            } else if (type === 'hat') {
                userProfile.equippedCosmetics.hat = id;
            } else if (type === 'face') {
                userProfile.equippedCosmetics.face = id;
            } else if (type === 'effect') {
                userProfile.equippedCosmetics.effect = id;
            } else if (type === 'sword') {
        userProfile.equippedCosmetics.sword = id;
    }
            
            saveUserProfile(userProfile);
            drawBigPlayerSphere();
            updateBigSphereAnimation();
            renderCosmetics();
        }

        // Tab switching
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                tab.classList.add('active');
                document.getElementById(tab.dataset.tab).classList.add('active');
            });
        });

        // Share button
        document.getElementById('shareBtn').addEventListener('click', () => {
            const canvas = document.getElementById('bigPlayerSphere');
            canvas.toBlob((blob) => {
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `${userProfile.username}_sphere.png`;
                a.click();
                URL.revokeObjectURL(url);
                alert('‚úÖ Sphere image downloaded!');
            });
        });

        // Initialize
        loadProfileData();
        renderCosmetics();
    </script>
</body>
</html>
